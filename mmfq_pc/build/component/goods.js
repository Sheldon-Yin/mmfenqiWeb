"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),R_Goods=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.state={json:[],t_startTime:"",t_endTime:"",text:"",h:"",m:"",s:"",leftOrRight:"0",showMore:!1},e.currentPage=1,e.timeConfig={h:"时",m:"分",style_t:{padding:5,margin:"0 5px"},style_h:{color:"#fd657a",border:"1px solid #e4e4e4",padding:5,margin:"0 5px",background:"#FFFFff"},style_s:{color:"#fd657a",border:"1px solid #e4e4e4",padding:5,margin:"0 5px",background:"#FFFFff"},style_m:{color:"#666666",border:"1px solid #e4e4e4",padding:5,margin:"0 5px",background:"#FFFFff"},compare:function(){var e=new Date;if(e.getHours()>=10){var t=e.Format("yyyy-MM-dd 23:59:59");return{time:t,text:"距离结束仅剩"}}var t=e.Format("yyyy-MM-dd 10:00:00");return{time:t,text:"距离开始仅剩"}}},e}return _inherits(t,e),_createClass(t,[{key:"query",value:function(e,t,a){var n=this;HttpService.query({url:"/pc/computer/query_flashSaleGoodsList_pc",data:{index:e,startTime:t,endTime:a},success:function(t){n.currentPage=e,n.totalPage=t.paginator.totalPage,n.totalPage>n.currentPage?n.setState({showMore:!0}):n.setState({showMore:!1}),n.setState({json:n.state.json.concat(t.flashSaleGoodsItemList)})}})}},{key:"today_fast",value:function(){this.setState({leftOrRight:"0"});var e=new Date,t=e.Format("yyyy-MM-dd 00:00:00"),a=e.Format("yyyy-MM-dd 23:59:59");this.query(1,t,a)}},{key:"tm_fast",value:function(){this.setState({leftOrRight:"1"});var e,t,a,n=new Date;a=n.setDate(n.getDate()+1),e=this.timeStamp2String(a),t=this.timeStamp3String(a),this.query(1,e,t)}},{key:"more",value:function(){if(this.currentPage=this.currentPage+1,"0"==this.state.leftOrRight){var e=new Date,t=e.Format("yyyy-MM-dd 00:00:00"),a=e.Format("yyyy-MM-dd 23:59:59");this.query(this.currentPage,t,a)}else if("1"==this.state.leftOrRight){var n,c,r,i=new Date;r=i.setDate(i.getDate()+1),n=this.timeStamp2String(r),c=this.timeStamp3String(r),this.query(this.currentPage,n,c)}}},{key:"timeStamp2String",value:function(e){var t=new Date;t.setTime(e);var a=t.getFullYear(),n=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,c=t.getDate()<10?"0"+t.getDate():t.getDate(),r="00",i="00",l="00";return a+"-"+n+"-"+c+" "+r+":"+i+":"+l}},{key:"timeStamp3String",value:function(e){var t=new Date;t.setTime(e);var a=t.getFullYear(),n=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,c=t.getDate()<10?"0"+t.getDate():t.getDate(),r="59",i="59",l="59";return a+"-"+n+"-"+c+" "+r+":"+i+":"+l}},{key:"timeStamp4String",value:function(e){var t=new Date;t.setTime(e);var a=t.getFullYear(),n=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,c=t.getDate()<10?"0"+t.getDate():t.getDate(),r=t.getHours()<10?"0"+t.getHours():t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),l=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return a+"-"+n+"-"+c+" "+r+":"+i+":"+l}},{key:"componentWillMount",value:function(){Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e};var e,t,a=new Date;console.log(a);var n=Date.parse(new Date),n=n/1e3;console.log("当前时间戳为："+n-123),e=a.Format("yyyy-MM-dd 00:00:00"),t=a.Format("yyyy-MM-dd 23:59:59"),this.setState({t_startTime:e,t_endTime:t}),this.query(1,e,t)}},{key:"render",value:function(){var e=this,t={display:"inline-block",width:107},a={display:"inline-block",width:103,textAlign:"right"};return React.createElement("div",{className:"goods-main"},React.createElement("div",{className:"main"}),React.createElement("div",{className:"goods-date"},React.createElement("div",{className:"_main"},React.createElement("div",{className:"left"},React.createElement("div",{className:"today-time"},React.createElement(R_TimeOver,{cxt:this})),React.createElement("div",{style:{color:"#999"}},"每日10：00-24：00 开抢")),React.createElement("div",{className:"right"},React.createElement("img",{src:"../static/images/goods/three.png",alt:""})))),React.createElement("div",{className:"activity-main"},React.createElement("div",{className:"activity-title"},0==this.state.leftOrRight?React.createElement("div",{className:"left",onClick:this.today_fast.bind(this)},React.createElement("div",{style:{height:"66px"}},React.createElement("div",{className:"t-content bg"},React.createElement("div",{className:"today-seckilling"},React.createElement("p",{style:{color:"#fff"}},"今日秒杀"))),React.createElement("div",{className:"_cb"}))):React.createElement("div",{className:"left",onClick:this.today_fast.bind(this)},React.createElement("div",{style:{height:"66px"}},React.createElement("div",{className:"t-content bd2"},React.createElement("div",{className:"today-seckilling"},React.createElement("p",{style:{color:"#000"}},"今日秒杀"))))),1==this.state.leftOrRight?React.createElement("div",{className:"right",onClick:this.tm_fast.bind(this)},React.createElement("div",{style:{height:"66px"}},React.createElement("div",{className:"tm bg"},React.createElement("div",{className:"tm-seckilling"},React.createElement("p",{style:{color:"#fff"}},"明日秒杀"))),React.createElement("div",{className:"_cb"}))):React.createElement("div",{className:"right",style:{width:"50%"},onClick:this.tm_fast.bind(this)},React.createElement("div",{style:{height:"66px"}},React.createElement("div",{className:"tm bd"},React.createElement("div",{className:"tm-seckilling"},React.createElement("p",null,"明日秒杀"))),React.createElement("div",null)))),React.createElement("div",{className:"activity-content"},this.state.json.map(function(n){return React.createElement("div",{className:"one",key:n.hotItemName},React.createElement("ul",null,Date.parse(new Date)<n.teamEndTime&&Date.parse(new Date)>=n.teamBeginTime?React.createElement("li",null,React.createElement("a",{href:"goods-detail.html?goodsId="+n.goodsHerf},React.createElement("div",{className:"top-img"}),React.createElement("div",{className:"img"},React.createElement("img",{src:n.goodsHerPic,alt:""})),React.createElement("div",{className:"goods-info"},React.createElement("p",null,n.hotItemName),React.createElement("div",null,"仅剩:",n.lastNumber),React.createElement("p",{style:{padding:"10px"}},React.createElement("span",{style:t},"限时价: ",React.createElement("b",null,"￥",n.temporaryPrice)," "),React.createElement("del",{style:a},"原价:￥",n.marketPrice)),React.createElement("div",null,e.timeStamp4String(n.teamBeginTime)),React.createElement("div",null,e.timeStamp4String(n.teamEndTime)),React.createElement("div",{className:"bg-img"},React.createElement("div",{className:"month-pay"},"月供:￥",n.monthlyPrice,React.createElement("spna",null,"x",n.staging)),React.createElement("div",{style:{color:"#fff"}},"立即分期"))))):React.createElement("li",null,React.createElement("a",{href:"goods-detail.html?goodsId="+n.goodsHerf},React.createElement("div",{className:"top-img"}),React.createElement("div",{className:"img"},React.createElement("img",{src:n.goodsHerPic,alt:""})),React.createElement("div",{className:"goods-info"},React.createElement("p",null,n.hotItemName),React.createElement("div",null,"仅剩:",n.lastNumber),React.createElement("p",{style:{padding:"10px"}},React.createElement("span",{style:t},"限时价: ",React.createElement("b",null,"￥",n.temporaryPrice)," "),React.createElement("del",{style:a},"原价:￥",n.marketPrice)),React.createElement("div",null,e.timeStamp4String(n.teamBeginTime)),React.createElement("div",null,e.timeStamp4String(n.teamEndTime)),React.createElement("div",{className:"bg-img2"},React.createElement("div",{className:"month-pay"},"月供:￥",n.monthlyPrice,React.createElement("spna",null,"x",n.staging)),React.createElement("div",{className:"active"},"马上开始")))))))}),this.state.showMore?React.createElement("div",{style:{clear:"both",textAlign:"center",margin:"0 auto"},onClick:this.more.bind(this)},React.createElement("button",null,"查看更多")):React.createElement("div",null))))}}]),t}(React.Component);