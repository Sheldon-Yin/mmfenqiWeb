"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),R_Coll_hos=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.state={ProvinceList:[],cityList:[],proviceId:"",hospitalList:[],conditions:{},currentIndex:-1,index:1,currentPage:1,cityId:"",proid:""},e.removeConditionListers=[],e}return _inherits(t,e),_createClass(t,[{key:"query_Allprovince",value:function(){var e=this;HttpService.query({url:"/pc/computer/query_Allprovince",success:function(t){e.setState({ProvinceList:t.provinceVOList})}})}},{key:"merge",value:function(e,t){var i={};for(var n in e)i[n]=e[n];for(var n in t)i[n]=t[n];return i}},{key:"onFilterChange",value:function(e,t){if("不限"==t)return this.setState({conditions:{},currentPage:1}),void this.queryHosByCityId("",this.state.currentPage);var i={};i[e]=t,this.setState({conditions:i}),setTimeout(function(){console.log(this.state.conditions)}.bind(this),0)}},{key:"addRemoveConditionListener",value:function(e){this.removeConditionListers.push(e)}},{key:"onConditionsChanged",value:function(e,t){this.removeConditionListers.forEach(function(i){i(e,t)})}},{key:"setQueryCondition",value:function(e,t,i){this.queryCondition[e]||(this.queryCondition[e]={}),this.queryCondition[e].name=t,this.queryCondition[e].value=i,this.handleClick(),console.log(this.queryCondition[e])}},{key:"clearQueryCondition",value:function(e,t){this.setState({conditions:{},currentPage:1}),this.queryHosByCityId("",this.state.currentPage)}},{key:"componentDidMount",value:function(){}},{key:"handleClick",value:function(e,t,i,n){this.setState({currentIndex:e,cityId:t,proid:n}),this.onFilterChange(t,i),this.queryHosByCityId(t,this.state.currentPage)}},{key:"queryHosByCityId",value:function(e,t){var i=this;HttpService.query({url:"/pc/computer/queryHospitalByCityIdPage",data:{cityId:e,currentPage:t},success:function(e){console.log(e),i.setState({hospitalList:e.hospitalList,index:e.page.totalPage})}})}},{key:"componentWillMount",value:function(){this.query_Allprovince(),this.queryHosByCityId("",this.state.currentPage)}},{key:"changeIndex",value:function(e){this.queryHosByCityId(this.state.cityId,e),window.location.href="#top"}},{key:"render",value:function(){console.log(this.state.ProvinceList);var e=(this.state.hospitalList,this.state.ProvinceList.map(function(e,t){var i={cursor:"pointer"};return e.proid==this.state.proid&&(i={cursor:"pointer",color:"rgb(233,113,125)"}),React.createElement("li",{key:t},React.createElement("span",{style:i},e.proname),React.createElement("div",{className:"itemCity"},this.state.ProvinceList[t].cityList.map(function(e,t){return React.createElement("span",{key:t,onClick:this.handleClick.bind(this,t,e.cityid,e.cityname,e.proid)},e.cityname)}.bind(this))))}.bind(this)));return React.createElement("div",{className:"wrap-hos"},React.createElement("div",{className:"Allprovince"},React.createElement("div",{style:{margin:"10px 20px"}},React.createElement("div",{className:"_left"},React.createElement("div",null,"地区:")),React.createElement("div",{className:"right"},React.createElement("ul",null,React.createElement("li",null,React.createElement("span",{style:this.state.currentIndex==-1?{cursor:"pointer",color:"rgb(233,113,125)"}:{cursor:"pointer"},onClick:this.handleClick.bind(this,-1,"","不限")},"不限")),e))),React.createElement(Conditions,{cxt:this,conditions:this.state.conditions})),React.createElement("div",{className:"provinceContent"},this.state.hospitalList.map(function(e,t){return React.createElement("div",{className:"info",key:t},React.createElement("div",{className:"c_left"},React.createElement("img",{src:e.pic})),React.createElement("div",{className:"c_right"},React.createElement("p",null,e.hosName),React.createElement("div",{className:"c_div"},e.introduction),React.createElement("div",{className:"c_addr"},"地址:",e.address)))})),React.createElement(Pagination,{cxt:this,numberOfPages:this.state.index,style:{display:0==this.state.index?"none":"block"}}))}}]),t}(React.Component),Conditions=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"onConditionsChange",value:function(e,t){return function(){this.props.cxt.clearQueryCondition(e,t)}.bind(this)}},{key:"render",value:function(){var e=[];for(var t in this.props.conditions)""!=this.props.conditions[t]&&e.push({key:t,value:this.props.conditions[t]});var i=e.map(function(e,t){var i={display:"inline-block",padding:"2px",paddingLeft:"8px",paddingRight:"8px",border:"1px solid rgb(233,113,125)",color:"rgb(233,113,125)",cursor:"pointer"};return t>0&&(i={display:"inline-block",padding:"2px",paddingLeft:"8px",paddingRight:"8px",border:"1px solid rgb(233,113,125)",color:"rgb(233,113,125)",cursor:"pointer",marginLeft:"5px"}),React.createElement("span",{key:e+" "+t,style:i,onClick:this.onConditionsChange(e.key,e.value)},e.value,"     X")}.bind(this));return React.createElement("div",{style:{margin:"20px",borderTop:"1px solid #ddd",padding:"7px  0",clear:"both"}},React.createElement("div",{style:{width:"5%",float:"left"}},React.createElement("span",{style:{display:"inline-block",padding:"4px",paddingLeft:"0px",color:"#a4a4a4"}},"条件")),React.createElement("div",{style:{width:"95%",float:"left"}},i))}}]),t}(React.Component),Pagination=React.createClass({displayName:"Pagination",getInitialState:function(){return{currentPage:0}},getDefaultProps:function(){return{maxNumberOfDisplayPages:10,numberOfPages:20,onPage:function(e){console.log(e)}.bind(this)}},firstPage:-1,lastPage:-1,onPage:function(e){return function(){e>=0&&e<this.props.numberOfPages&&(this.props.cxt.changeIndex(e+1),this.setState({currentPage:e}))}.bind(this)},goto:function(){var e=parseInt(this.refs.pageInput.value-1);this.onPage(e)()},render:function(){(this.firstPage==-1||this.lastPage==-1||Math.abs(this.state.currentPage-this.firstPage)<1||Math.abs(this.state.currentPage-this.lastPage)<1||this.state.currentPage<this.firstPage||this.state.currentPage>this.lastPage)&&(this.firstPage=this.state.currentPage-parseInt(this.props.maxNumberOfDisplayPages/2),this.firstPage<0&&(this.firstPage=0),this.lastPage=this.firstPage+this.props.maxNumberOfDisplayPages,this.lastPage>this.props.numberOfPages-1&&(this.lastPage=this.props.numberOfPages-1),this.lastPage-this.firstPage+1<this.props.maxNumberOfDisplayPages&&(this.firstPage=this.lastPage-this.props.maxNumberOfDisplayPages+1,this.firstPage<0&&(this.firstPage=0)));var e=[];e.push({text:"首页",page:0}),e.push({text:"上一页",page:this.state.currentPage-1});for(var t=this.firstPage;t<=this.lastPage;t++){var i=t+1;t==this.firstPage&&this.firstPage>0&&(i="..."),t==this.lastPage&&this.lastPage<this.props.numberOfPages-1&&(i="..."),e.push({text:i,page:t})}e.push({text:"下一页",page:this.state.currentPage+1}),e.push({text:"最后一页",page:this.props.numberOfPages-1});var n=e.map(function(e,t){var i={marginRight:"4px",textAlign:"center",minWidth:"30px",cursor:"pointer",display:"inline-block",border:"1px solid #f3f3f3",backgroundColor:"rgb(248,249,250)",padding:"4px"};return e.page==this.state.currentPage&&parseInt(e.text)==e.page+1&&(i={backgroundColor:"rgb(233,113,125)",marginRight:"4px",textAlign:"center",minWidth:"30px",cursor:"pointer",display:"inline-block",color:"white",border:"1px solid #f3f3f3",padding:"4px"}),React.createElement("span",{onClick:this.onPage(e.page),key:e+" "+t,style:i},e.text)}.bind(this));return React.createElement("div",{style:{display:0==this.props.numberOfPages?"none":"block"}},n,React.createElement("span",null,"  共",this.props.numberOfPages,"页"),React.createElement("span",null,"  转到  "),React.createElement("input",{ref:"pageInput",type:"text",style:{cursor:"pointer",textAlign:"center",backgroundColor:"rgb(248,249,250)",border:"1px solid #f3f3f3",width:"45px",padding:"4px"}}),React.createElement("span",null,"  页  "),React.createElement("input",{type:"button",onClick:this.goto,value:"确定",style:{backgroundColor:"rgb(233,113,125)",color:"white",border:"0px solid transparent",padding:"12px"}}))}});