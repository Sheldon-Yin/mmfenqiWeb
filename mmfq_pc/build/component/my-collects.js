"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),R_MyCollects=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.state={currentPage:1,data:[],goodsItemList:[],totalPage:"",totalItem:""},e}return _inherits(t,e),_createClass(t,[{key:"changeIndex",value:function(e){this.queryCollections(e,1),window.location.href="#top"}},{key:"queryCollections",value:function(e,t){var a=this;HttpService.query({url:"/pc/computer/my_goods_collection",data:{currentPage:e,collectionType:t},success:function(e){console.log(e),a.setState({data:e.data,goodsItemList:e.goodsItemList,totalPage:e.page.totalPage,totalItem:e.page.totalItem})}})}},{key:"cancelCollection",value:function(e){HttpService.save({url:"/pc/computer/cancel_collection",data:{id:e},success:function(e){setTimeout(function(){window.location.reload()},1e3)}})}},{key:"cancel",value:function(e){this.cancelCollection(e)}},{key:"componentWillMount",value:function(){this.queryCollections(this.state.currentPage,1)}},{key:"render",value:function(){var e=this,t=this.state.goodsItemList;return console.log(t),React.createElement("div",{style:{float:"left"}},React.createElement("div",{className:"wrap-content"},React.createElement("div",{className:"wrap-content-right"},React.createElement("div",null,React.createElement("div",{className:"top"},React.createElement("ul",null,React.createElement("li",{style:{color:"#fd657a",fontSize:"14px"}},"收藏商品(",this.state.totalItem,")"))),React.createElement("div",{className:"top-content"},0==this.state.totalItem?React.createElement("div",{className:"goods-collect",style:{paddingTop:20,minHeight:400}},"亲，您暂时还没有收藏商品哦!"):React.createElement("div",{className:"goods-collect"},React.createElement("ul",null,this.state.goodsItemList.map(function(t,a){return React.createElement("li",{key:a},React.createElement("div",{className:"bodyInfo"},React.createElement("div",{className:"img"},React.createElement("img",{src:t.goodsItem.goodsHerPic,style:{width:"100%",height:"100%"},alt:""})),React.createElement("div",{className:"info"},React.createElement("div",{className:"title"},React.createElement("a",{href:"goods-detail.html?goodsId="+t.goodsItem.goodsHerf},t.goodsItem.hotItemName)),React.createElement("div",{className:"addr"},t.goodsItem.hospitalName),React.createElement("div",{className:"money"},React.createElement("span",null,"￥",React.createElement("i",null,t.goodsItem.monthlyPrice)),React.createElement("span",{className:"del"},"医院价: ",React.createElement("del",null,"￥",t.goodsItem.marketPrice)))),React.createElement("div",{className:"Operation"},React.createElement("a",{href:"goods-detail.html?goodsId="+t.goodsItem.goodsHerf},React.createElement("div",{className:"detail"},"查看详情")),React.createElement("div",{className:"cancel",onClick:e.cancel.bind(e,t.collectionId)},"取消收藏"))))})))),React.createElement(Pagination,{changeIndex:this.changeIndex.bind(this),numberOfPages:this.state.totalPage})))))}}]),t}(React.Component),Pagination=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.state={},e}return _inherits(t,e),_createClass(t,[{key:"pageIndexChange",value:function(e){var t=e.target,a="",n=t.value,c=t.value,l=t.getAttribute("data-type");if("link"==l)a=e.target.innerHTML,isNaN(a)?"首页"==a?n=1:"尾页"==a?n=this.props.pageNum:"»"==a?n=parseInt(this.props.pageIndex)+1:"«"==a&&(n=parseInt(this.props.pageIndex)-1):n=a,this.props.pageIndexChange(n);else if("btn-go"==l){var s=document.getElementById("index-input");c=s.value,this.props.pageIndexChange(c)}else if("input"==l)return null}},{key:"render",value:function(){for(var e=[],t=[],a=[],n=1==this.props.pageIndex?"disabled":"",c=this.props.pageNum==this.props.pageIndex?"disabled":"",l=(Math.ceil(this.props.pageIndex/this.state.showLinkNum)-1)*this.state.showLinkNum+1,s=Math.min(l+this.state.showLinkNum,this.props.pageNum+1),o=l;o<s;o++){var i=o==this.props.pageIndex?"active":"";a.push(React.createElement("li",{key:o,className:i},React.createElement("a",{href:"javascript:;","data-type":"link"},o)))}return e.push(React.createElement("li",{key:"first",className:n},React.createElement("a",{href:"javascript:;","data-type":"link"},"首页"))),e.push(React.createElement("li",{key:"1",className:n},React.createElement("a",{href:"javascript:;","aria-label":"Previous","data-type":"link",id:"pre"},"«"))),t.push(React.createElement("li",{key:"last",className:c},React.createElement("a",{href:"javascript:;","data-type":"link"},"尾页"))),t.push(React.createElement("li",{key:this.props.pageNum,className:c},React.createElement("a",{href:"javascript:;","aria-label":"Next","data-type":"link",id:"next"},"»"))),React.createElement("nav",{className:"text-right",key:"page"},React.createElement("ul",{className:"pagination",onClick:this.pageIndexChange.bind(this)},e,a,t,React.createElement("li",null,React.createElement("input",{type:"text","data-type":"input",id:"index-input"}),React.createElement("a",{href:"javascript:;",className:"btn page-go","data-type":"btn-go"},"跳转"))))}}]),t}(React.Component);