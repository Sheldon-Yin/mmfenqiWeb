"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var l=0;l<t.length;l++){var a=t[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,l,a){return l&&e(t.prototype,l),a&&e(t,a),t}}(),R_MyBill=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.state={data:[],myBillResponse:[],isOpen:"",repaymentedBill:"",length:"-1"},e}return _inherits(t,e),_createClass(t,[{key:"componentWillMount",value:function(){$.cookie("appToken")||(window.location.href="login.html")}},{key:"myBill",value:function(e){var t=this;if($(".top ul li").eq(e).addClass("color_fd5").siblings("li").removeClass("color_fd5"),"2"==e)return this.setState({isOpen:"0",repaymentedBill:"1"}),void $.ajax({type:"post",url:"/pc/computer/repaymented_bill",dataType:"json",success:function(e){1013==e.result&&(window.location.href="login.html"),console.log(e),t.setState({data:e.data,myBillResponse:e.data.myBillResponse,length:e.data.billNum})}});if("0"==e){var l={periodType:e};$.ajax({type:"post",url:"/pc/computer/user_bill",data:l,dataType:"json",success:function(e){console.log(e),1013==e.result&&(window.location.href="login.html"),t.setState({data:e.data,myBillResponse:e.data.myBillResponse,length:e.data.billNum,isOpen:"1",repaymentedBill:"0"})}})}else if("1"==e){var a={periodType:e};$.ajax({type:"post",url:"/pc/computer/user_bill",data:a,dataType:"json",success:function(e){console.log(e),1013==e.result&&(window.location.href="login.html"),t.setState({data:e.data,myBillResponse:e.data.myBillResponse,length:e.data.billNum,isOpen:"0",repaymentedBill:"0"})}})}}},{key:"pay",value:function(e){if(e instanceof Array)var t=e.join(","),l=t;else var l=e;var a={repaymentPlanId:l};$.ajax({type:"post",url:"/pc/computer/repayment",data:a,dataType:"json",success:function(e){console.log(e);var t=e.data.bill_amount,l=e.data.orderId,a=e.data.orderStr;window.open("my-pay.html?bill_amount="+t+"&orderId="+l+"&orderStr="+a)}})}},{key:"timeStamp2String",value:function(e){var t=new Date;t.setTime(e);var l=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate(),c=t.getHours()<10?"0"+t.getHours():t.getHours(),r=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),i=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return l+"-"+a+"-"+n+" "+c+":"+r+":"+i}},{key:"getType",value:function(e){switch(e){case"0":return"还款中";case"1":return"已还款";case"2":return"延期还款";case"3":return"逾期还款";default:return"无"}}},{key:"componentDidMount",value:function(){this.myBill("0")}},{key:"render",value:function(){var e=this,t=(this.state.data,this.state.length);return console.log(t),console.log(this.state.myBillResponse),React.createElement("div",{style:{float:"left"}},React.createElement("div",{className:"wrap-content"},React.createElement("div",{className:"wrap-content-right"},React.createElement("div",null,React.createElement("div",{className:"top"},React.createElement("ul",null,React.createElement("li",{className:"color_fd5",onClick:this.myBill.bind(this,"0")},"本期账单"),React.createElement("li",{onClick:this.myBill.bind(this,"1")},"下期账单"),React.createElement("li",{onClick:this.myBill.bind(this,"2")},"已全部还款账单"))),"-1"==t?React.createElement("div",null):"0"==t?React.createElement("div",{className:"month-content"},React.createElement("div",{style:{width:"150px",float:"left",minHeight:500}},React.createElement("ul",null,React.createElement("li",null,"亲，暂还没有账单哦！")))):React.createElement("div",{className:"month-content",style:{display:"1"==this.state.isOpen&&"0"!=this.state.data.billNum?"block":"none"}},React.createElement("div",{style:{width:"150px",float:"left"}},React.createElement("ul",null,React.createElement("li",null,"本月，共 ",React.createElement("span",null,this.state.data.billNum),"笔账单"),React.createElement("li",null,"待还款 ",React.createElement("span",null,"￥",this.state.data.payBillAmount)))),React.createElement("div",{className:"_btn btn_btn",onClick:this.pay.bind(this,this.state.data.payBillId),style:{float:"left",marginTop:"33px"}},"立即还款")),this.state.myBillResponse.map(function(t){return React.createElement("div",{className:"top-content",key:t.repaymentPlanId},React.createElement("div",{className:"one"},React.createElement("div",{className:"sub-content"},React.createElement("ul",null,React.createElement("li",null,"距离还款日仅剩: ",React.createElement("span",{style:{color:"#fc6578",fontSize:"12px"}},t.to_repayment_date,"天")),React.createElement("li",null,"期数: ",React.createElement("b",null,t.staging)),React.createElement("li",null,"到期时间: ",React.createElement("b",null,t.expiredTime)),React.createElement("li",{style:{display:1==t.repayment_status?"inline-block":"none"}},"还款状态: ",React.createElement("b",null,e.getType(t.repayment_status))," "),React.createElement("li",{style:{display:2==t.repayment_status?"inline-block":"none"}},"还款状态: ",React.createElement("b",null,e.getType(t.repayment_status))," "),React.createElement("li",{style:{display:0==t.repayment_status?"inline-block":"none"}},"还款状态: ",React.createElement("span",{style:{color:"#ff682c",fontSize:"12px"}},e.getType(t.repayment_status))," "),React.createElement("li",{style:{display:3==t.repayment_status?"inline-block":"none"}},"还款状态: ",React.createElement("span",{style:{color:"#ff65da",fontSize:"12px"}},e.getType(t.repayment_status))," ")),React.createElement("ul",null,React.createElement("li",{style:{width:"70px"}},"商品名称: ",React.createElement("b",null),"   "),React.createElement("li",{style:{width:"260px",paddingRight:"78px",color:"#7fa9d3"}},t.goodsName),React.createElement("li",null,"订单号: ",React.createElement("b",{style:{color:"#7fa9d3"}},t.orderNo)),React.createElement("li",null,"所属医院: ",React.createElement("b",null,t.hosName)," ")),""==e.state.repaymentedBill?React.createElement("div",null):1==e.state.repaymentedBill?React.createElement("div",{className:"repaymented_bill"},React.createElement("img",{src:"../static/images/repaymented_bill.png"})):React.createElement("div",null)),React.createElement("div",{className:"refund"},React.createElement("div",null,React.createElement("p",null,"本期账单应付: ",React.createElement("span",null,"￥",t.payAmount)," ")),React.createElement("div",{style:{color:"#9e9e9e"}},"应付明细:",t.payAmount,"+",t.overBreachAmount," (逾期费)"),React.createElement("div",{className:"btn",style:{display:"1"==e.state.isOpen?"inline-block":"none"}},React.createElement("div",{className:"_btn btn_btn",onClick:e.pay.bind(e,t.repaymentPlanId)},"立即还款"))),React.createElement("div",null,React.createElement("table",{cellSpacing:"0",cellPadding:"0"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"分期金额(元)"),React.createElement("th",null,"分期数"),React.createElement("th",null,"到期时间"),React.createElement("th",null,"实际还款时间"),React.createElement("th",null,"还款状态"))),t.billStageList.map(function(t){return React.createElement("tbody",{className:"bg_bd",key:t.id},React.createElement("tr",null,React.createElement("td",null,React.createElement("li",null,"￥",t.payAmount," ",React.createElement("span",null,"(包含逾期费:",t.overBreachAmount,")"))),React.createElement("td",null,React.createElement("li",null,t.staging)),React.createElement("td",null,React.createElement("li",null,e.timeStamp2String(t.payTime))),React.createElement("td",null,React.createElement("li",null,null==t.actualPayTime?"-":e.timeStamp2String(t.actualPayTime))),React.createElement("td",null,React.createElement("li",null,e.getType(t.status)))))}))),"1"==e.state.repaymentedBill?React.createElement("div",null):React.createElement("div",{className:"page_foot"},React.createElement("div",null),React.createElement("div",null,"共 ",React.createElement("span",null,t.orderSurplusNum),"个账单，本期还款总额: ",React.createElement("span",null,"￥",t.orderSurplusPrice)),React.createElement("div",{className:"pay_type"},React.createElement("div",{onClick:e.pay.bind(e,t.orderSurplusId)},"全部还清")))))})))))}}]),t}(React.Component);