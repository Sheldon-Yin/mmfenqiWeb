"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),RMy_pay=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.state={downpayAmount:"",url:"",orderId:""},e}return _inherits(t,e),_createClass(t,[{key:"getUrl",value:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null}},{key:"weixinMchPay",value:function(e,t){var a={downpayAmount:e,orderId:t,type:"1",payType:"1"};$.ajax({type:"post",url:"/pc/weixin/weixinMchPay",data:a,dataType:"json",success:function(e){this.setState({url:"/pc/weixin/getQRCode?codeUrl="+e.data.resPar.codeUrl})}.bind(this)})}},{key:"alipayTrade",value:function(){var e=this.getUrl("bill_amount"),t=this.getUrl("orderId");window.location.href="/pc/alipayWeb/alipayTrade?downpayAmount="+e+"&orderId="+t+"&type=1"}},{key:"componentDidMount",value:function(){var e=this.getUrl("bill_amount"),t=this.getUrl("orderId");this.setState({downpayAmount:e}),this.weixinMchPay(e,t);var a=this;setInterval(function(){a.check_order_pay_success(t)},1e3)}},{key:"check_order_pay_success",value:function(e){$.ajax({type:"post",url:"/pc/computer/check_bill_pay_success",data:{orderId:e},dataType:"json",success:function(t){console.log(t),"0"==t.result&&t.data.isPaySuccess&&(window.location.href="pay-success.html?orderId="+e)}})}},{key:"render",value:function(){return React.createElement("div",{className:"wrap-content"},React.createElement("div",{className:"title-info"},React.createElement("div",{className:"left"},React.createElement("p",null,"还款申请已提交，请尽快还款"),React.createElement("p",null,"收款方:美眉分期")),React.createElement("div",{className:"right"},React.createElement("p",null,"还款金额 ",React.createElement("span",null,"￥",this.state.downpayAmount)))),React.createElement("div",{className:"_sub"},React.createElement("div",{className:"pay-method"},"选择支付方式"),React.createElement("div",{className:"pay-content"},React.createElement("div",{className:"weChatPay"},React.createElement("div",{className:"good"},React.createElement("img",{src:"../static/images/my-pay/my-pay.png",alt:""})),React.createElement("div",{className:"we-title"},React.createElement("div",null,React.createElement("img",{src:"../static/images/my-pay/pay2.png",alt:""}))),React.createElement("div",{className:"weixinma"},React.createElement("div",null,React.createElement("img",{src:this.state.url,style:{width:"100%",height:"100%"}})),React.createElement("p",null,"请使用微信扫描下方的二维码完成支付"))),React.createElement("div",{className:"alipay"},React.createElement("div",{style:{paddingLeft:"40px",width:"780px"}},React.createElement("img",{src:"../static/images/my-pay/pay1.png",alt:""})),React.createElement("div",{className:"_btn btn_btn",onClick:this.alipayTrade.bind(this),style:{padding:"7px",borderRadius:"0"}},"去支付")))))}}]),t}(React.Component);